<UserControl x:Class="JouleadAssistantDesign.Views.TemplateElementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:JouleadAssistantDesign.ViewModels">
    <UserControl.DataContext>
        <vm:TemplateElementViewModel/>
    </UserControl.DataContext>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <TextBlock Grid.Row="0"
               Text="{Binding Title}"
               FontSize="18"
               FontWeight="Bold"
               Margin="0,0,0,12"/>

        <!-- 元素模板列表 -->
        <DataGrid Grid.Row="1"
              ItemsSource="{Binding Elements}"
              SelectedItem="{Binding SelectedElement, Mode=TwoWay}"
              AutoGenerateColumns="False"
              CanUserAddRows="False"
              Margin="0,0,0,12">
            <DataGrid.Columns>
                <DataGridTextColumn Header="序号"
                            Binding="{Binding DisplayIndex}"
                            Width="80"/>
                <DataGridTextColumn Header="名称"
                            Binding="{Binding Name}"
                            Width="*"/>
                <DataGridTextColumn Header="标准内容"
                            Binding="{Binding StandardContent}"
                            Width="2*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- 底部按钮：删除、新增、保存、返回 -->
        <StackPanel Grid.Row="2"
                Orientation="Horizontal"
                HorizontalAlignment="Right"
                Margin="0,8,0,0">
            <!-- 删除行，只有 SelectedElement != null 时可用 -->
            <Button Content="删除行"
              Width="80" Margin="4"
              Command="{Binding RemoveRowCommand}"/>

            <!-- 新增行 -->
            <Button Content="新增行"
              Width="80" Margin="4"
              Command="{Binding AddRowCommand}"/>

            <!-- 编辑下拉菜单选项 -->
            <Button Content="下拉菜单选项"
              Width="100" Margin="4"
              Command="{Binding EditDropdownOptionsCommand}"/>

            <!-- 保存 -->
            <Button Content="保存"
              Width="80" Margin="4"
              Command="{Binding SaveCommand}"/>

            <!-- 返回：调用 MainWindowViewModel 的 ShowTemplateListCommand -->
            <Button Content="返回"
              Width="80" Margin="4"
              Command="{Binding DataContext.ShowTemplateListCommand,
                        RelativeSource={RelativeSource AncestorType=Window}}"/>
        </StackPanel>
    </Grid>
</UserControl>


